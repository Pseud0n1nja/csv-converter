# csv-converter

A ruby script to convert [version 0.7](http://cricsheet.org/format/) [Cricsheet YAML data files](http://cricsheet.org/downloads/) into CSV.

The CSV generated is considered an **experimental** Cricsheet format. Currently CSV data is provided on cricket for all T20 and IPL matches. The CSV version was originally created in response to a request for a simple version of the data in CSV format (rather than YAML). The data it generates is not as complete as the YAML data and, currently, does not fully support all fields. A list of [known limitations](#known-limitations) can be found below.

The data generated is similar to, but **not exactly the same as**, that provided on the [Cricsheet downloads](http://cricsheet.org/downloads/) page. The data generated by the `convert.rb` script does not include values for `season`, `match_number`, `series`, `reserve_umpire`, `tv_umpire`, or `match_referee`, unlike that provided on the website. A future version of this converter will include these fields.  

## Installation

You can manage the dependencies using [Bundler](http://bundler.io/). Once you have it installed you can install the dependencies using:

```bash
$ bundle install
```

## Usage

`convert.rb` is a ruby script. It takes the path to a single match file (in version 0.7 YAML format), and outputs the generated CSV for the match.

## Examples

Convert a single YAML file, and print the resulting CSV to the command line.

```bash
$ ./convert.rb data.yaml
```

Convert a single YAML file, and write the resulting CSV to a file named `data.csv`.

```bash
$ ./convert.rb data.yaml > data.csv
```

## Known limitations

There are a number of known limitations with the current CSV format. Discussion/feedback on how best to address these is welcome.

### Lack of detail for extras

At the moment each delivery merely shows how many extras were scored, and doesn't break that information down into the type of extras that were conceded. This is due to the original request for CSV data specially asking just for the total extras conceded per delivery.

### Multiple dismissals on the same delivery

There is also a potential issue with regards to multiple dismissals recorded against a single delivery. This has happened once in the period that Cricsheet covers, in [the 1st Test of 2014 between Pakistan and Australia](http://www.espncricinfo.com/pakistan-v-australia-2014/engine/match/727927.html?innings=1;page=3;view=commentary). Versions 0.6 and up of the YAML data support this situation, however the CSV format does not as it was created before that event took place.
